{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/srineerajreddypalakolanu/Desktop/B2B/components/StaffingScroll.tsx"],"sourcesContent":["'use client';\n\nimport { useScroll, useMotionValueEvent, useTransform } from 'framer-motion';\nimport { useEffect, useRef, useState } from 'react';\nimport { motion } from 'framer-motion';\n\n// Total frames in the sequence based on the user's provided files (approx 200 based on file list)\n// We will assume 200 for now, but good to be dynamic if possible. \n// The file list showed frame-200.jpg, so 200 is the count.\nconst FRAME_COUNT = 200;\n\nexport default function StaffingScroll() {\n    const containerRef = useRef<HTMLDivElement>(null);\n    const canvasRef = useRef<HTMLCanvasElement>(null);\n    const [images, setImages] = useState<HTMLImageElement[]>([]);\n    const [isLoading, setIsLoading] = useState(true);\n    const [loadProgress, setLoadProgress] = useState(0);\n\n    const { scrollYProgress } = useScroll({\n        target: containerRef,\n        offset: ['start start', 'end end'],\n    });\n\n    // Map scroll progress 0..1 to frame index 0..FRAME_COUNT-1\n    const frameIndex = useTransform(scrollYProgress, [0, 1], [1, FRAME_COUNT]);\n\n    // Preload images\n    useEffect(() => {\n        let loadedCount = 0;\n        const imgArray: HTMLImageElement[] = [];\n\n        const loadImages = async () => {\n            for (let i = 1; i <= FRAME_COUNT; i++) {\n                const img = new Image();\n                // Pad with zeros (e.g. 1 -> \"001\")\n                const formattedIndex = i.toString().padStart(3, '0');\n                // Actual files are frame-001.jpg etc.\n                img.src = `/frames/frame-${formattedIndex}.jpg`;\n\n                await new Promise((resolve, reject) => {\n                    img.onload = () => {\n                        loadedCount++;\n                        setLoadProgress(Math.round((loadedCount / FRAME_COUNT) * 100));\n                        resolve(true);\n                    };\n                    img.onerror = () => {\n                        console.error(`Failed to load frame ${i}`);\n                        // Resolve anyway to continue\n                        resolve(true);\n                    };\n                });\n                imgArray[i - 1] = img;\n            }\n            setImages(imgArray);\n            setIsLoading(false);\n        };\n\n        loadImages();\n    }, []);\n\n    // Render to canvas\n    useMotionValueEvent(frameIndex, 'change', (latest) => {\n        if (!canvasRef.current || images.length === 0) return;\n\n        const canvas = canvasRef.current;\n        const ctx = canvas.getContext('2d');\n        if (!ctx) return;\n\n        // Use Math.floor to get integer index, clamp between 0 and total-1\n        const index = Math.min(\n            Math.max(Math.floor(latest) - 1, 0),\n            images.length - 1\n        );\n\n        const img = images[index];\n        if (!img) return;\n\n        // Canvas sizing logic (contain)\n        const cw = canvas.width;\n        const ch = canvas.height;\n        const iw = img.naturalWidth;\n        const ih = img.naturalHeight;\n\n        // Standard aspect ratio fitting (contain)\n        const scale = Math.min(cw / iw, ch / ih);\n        const w = iw * scale;\n        const h = ih * scale;\n        const x = (cw - w) / 2;\n        const y = (ch - h) / 2;\n\n        requestAnimationFrame(() => {\n            ctx.clearRect(0, 0, cw, ch);\n            ctx.drawImage(img, x, y, w, h);\n        });\n    });\n\n    // Handle Resize\n    useEffect(() => {\n        const handleResize = () => {\n            if (canvasRef.current) {\n                canvasRef.current.width = window.innerWidth;\n                canvasRef.current.height = window.innerHeight;\n                // Force a redraw of the current frame if needed, \n                // but the scroll listener will pick it up on next scroll or we could trigger it.\n                // For now rely on scroll or initial render.\n            }\n        };\n        window.addEventListener('resize', handleResize);\n        handleResize(); // Initial size\n        return () => window.removeEventListener('resize', handleResize);\n    }, []);\n\n    // Text Opacity Transforms\n    // 0% -> 20%: First text\n    // 30% -> 50%: Second text\n    // 60% -> 80%: Third text\n    // 90% -> 100%: Fourth text\n    const opacity1 = useTransform(scrollYProgress, [0, 0.1, 0.2], [1, 1, 0]);\n    const opacity2 = useTransform(scrollYProgress, [0.3, 0.4, 0.5], [0, 1, 0]);\n    const opacity3 = useTransform(scrollYProgress, [0.6, 0.7, 0.8], [0, 1, 0]);\n    const opacity4 = useTransform(scrollYProgress, [0.85, 0.95, 1], [0, 1, 1]);\n\n    // Initial draw when loading finishes\n    useEffect(() => {\n        if (!isLoading && images.length > 0 && canvasRef.current) {\n            // Find the image for current scroll pos (likely 0) or standard 0\n            const ctx = canvasRef.current.getContext('2d');\n            const img = images[0];\n            if (ctx && img) {\n                const cw = canvasRef.current.width;\n                const ch = canvasRef.current.height;\n                const scale = Math.min(cw / img.naturalWidth, ch / img.naturalHeight);\n                const w = img.naturalWidth * scale;\n                const h = img.naturalHeight * scale;\n                const x = (cw - w) / 2;\n                const y = (ch - h) / 2;\n                ctx.clearRect(0, 0, cw, ch);\n                ctx.drawImage(img, x, y, w, h);\n            }\n        }\n    }, [isLoading, images]);\n\n\n    if (isLoading) {\n        return (\n            <div className=\"fixed inset-0 z-50 flex flex-col items-center justify-center bg-black text-white\">\n                <div className=\"text-2xl font-light tracking-widest\">LOADING ASSETS</div>\n                <div className=\"mt-4 h-[2px] w-64 bg-gray-800 rounded-full overflow-hidden\">\n                    <motion.div\n                        className=\"h-full bg-white\"\n                        initial={{ width: 0 }}\n                        animate={{ width: `${loadProgress}%` }}\n                    />\n                </div>\n                <div className=\"mt-2 text-sm text-gray-400 font-mono\">{loadProgress}%</div>\n            </div>\n        );\n    }\n\n    return (\n        <div ref={containerRef} className=\"relative h-[400vh] bg-black\">\n            <canvas\n                ref={canvasRef}\n                className=\"sticky top-0 h-screen w-full object-contain\"\n            />\n\n            {/* Overlays Wrapper - Fixed on top of canvas? No, they should be fixed or sticky? \n          The user spec says \"Overlay text that fades in/out\". \n          Ideally, they are fixed on screen while the user scrolls through the timeline.\n      */}\n            <div className=\"fixed top-0 left-0 w-full h-full pointer-events-none z-10 flex flex-col justify-center items-center px-8 mix-blend-difference text-white\">\n\n                {/* Text 1: Centered */}\n                <motion.div style={{ opacity: opacity1 }} className=\"absolute text-center\">\n                    <h1 className=\"text-4xl md:text-7xl font-bold tracking-tighter\">One Vision.<br />Limited Hands?</h1>\n                </motion.div>\n\n                {/* Text 2: Left Aligned */}\n                <motion.div style={{ opacity: opacity2 }} className=\"absolute w-full px-12 md:px-24 flex justify-start\">\n                    <h2 className=\"text-3xl md:text-6xl font-medium tracking-tight\">Instant Deployment.</h2>\n                </motion.div>\n\n                {/* Text 3: Right Aligned */}\n                <motion.div style={{ opacity: opacity3 }} className=\"absolute w-full px-12 md:px-24 flex justify-end\">\n                    <h2 className=\"text-3xl md:text-6xl font-medium tracking-tight text-right\">Global Talent Pool.</h2>\n                </motion.div>\n\n                {/* Text 4: Centered */}\n                <motion.div style={{ opacity: opacity4 }} className=\"absolute text-center\">\n                    <h2 className=\"text-4xl md:text-8xl font-black uppercase tracking-widest\">Your Project.<br />Delivered.</h2>\n                </motion.div>\n\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}}]
}